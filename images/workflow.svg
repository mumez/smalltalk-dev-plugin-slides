<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 520" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#555"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2C67E5"/>
    </marker>
    <marker id="arrow-red" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#DF3756"/>
    </marker>
  </defs>

  <!-- Step 1: Edit Tonel Files -->
  <rect x="180" y="20" width="280" height="52" rx="8" fill="#E8F0FE" stroke="#2C67E5" stroke-width="2"/>
  <text x="320" y="42" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a1a1a">1. Edit Tonel Files</text>
  <text x="320" y="60" text-anchor="middle" font-size="12" fill="#555">AI editor is the source of truth</text>

  <!-- Arrow 1→2 -->
  <line x1="320" y1="72" x2="320" y2="98" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 2: Lint -->
  <rect x="180" y="100" width="280" height="44" rx="8" fill="#E8F0FE" stroke="#2C67E5" stroke-width="2"/>
  <text x="320" y="127" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a1a1a">2. Lint</text>
  <text x="468" y="127" text-anchor="start" font-size="13" fill="#2C67E5" font-style="italic">/st:lint</text>

  <!-- Arrow 2→3 -->
  <line x1="320" y1="144" x2="320" y2="170" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 3: Import to Pharo -->
  <rect x="180" y="172" width="280" height="44" rx="8" fill="#E8F0FE" stroke="#2C67E5" stroke-width="2"/>
  <text x="320" y="199" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a1a1a">3. Import to Pharo</text>
  <text x="468" y="199" text-anchor="start" font-size="13" fill="#2C67E5" font-style="italic">/st:import</text>

  <!-- Arrow 3→4 -->
  <line x1="320" y1="216" x2="320" y2="242" stroke="#555" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 4: Run Tests -->
  <rect x="180" y="244" width="280" height="44" rx="8" fill="#E8F0FE" stroke="#2C67E5" stroke-width="2"/>
  <text x="320" y="271" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a1a1a">4. Run Tests</text>
  <text x="468" y="271" text-anchor="start" font-size="13" fill="#2C67E5" font-style="italic">/st:test</text>

  <!-- Branch point -->
  <!-- Arrow to Pass -->
  <line x1="250" y1="288" x2="170" y2="330" stroke="#2C67E5" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <!-- Arrow to Fail -->
  <line x1="390" y1="288" x2="470" y2="330" stroke="#DF3756" stroke-width="2" marker-end="url(#arrow-red)"/>

  <!-- Pass -->
  <rect x="80" y="332" width="180" height="44" rx="22" fill="#E6F4EA" stroke="#34A853" stroke-width="2"/>
  <text x="170" y="359" text-anchor="middle" font-size="16" font-weight="bold" fill="#34A853">Pass ✓ → Done</text>

  <!-- Fail -->
  <rect x="380" y="332" width="180" height="44" rx="22" fill="#FCE8E6" stroke="#DF3756" stroke-width="2"/>
  <text x="470" y="359" text-anchor="middle" font-size="16" font-weight="bold" fill="#DF3756">Fail ✗</text>

  <!-- Arrow Fail → Debug -->
  <line x1="470" y1="376" x2="470" y2="412" stroke="#DF3756" stroke-width="2" marker-end="url(#arrow-red)"/>

  <!-- Step 5: Debug & Fix -->
  <rect x="340" y="414" width="260" height="52" rx="8" fill="#FFF3E0" stroke="#E68A00" stroke-width="2"/>
  <text x="470" y="436" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a1a1a">5. Debug &amp; Fix</text>
  <text x="470" y="454" text-anchor="middle" font-size="13" fill="#E68A00" font-style="italic">/st:eval</text>

  <!-- Loop arrow: Debug → back to step 2 (Re-import & Re-test) -->
  <path d="M 600 440 Q 680 440 680 200 Q 680 120 460 120" fill="none" stroke="#E68A00" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrow)"/>
  <text x="696" y="280" text-anchor="middle" font-size="12" fill="#E68A00" transform="rotate(90, 696, 280)">Re-import &amp; Re-test</text>
</svg>
